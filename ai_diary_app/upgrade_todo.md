# ArtDiary AI 업그레이드 TODO

## 즉시 개선 가능 (이번 세션)

### 1. 프로그레스 단계별 표시
**파일:** `lib/screens/diary_create_screen.dart:588-606`
**현재 상태:** "이미지 생성중입니다" 단순 메시지
**개선 내용:**
- 사진 분석 중... (사진이 있을 때)
- 감정 분석 중...
- 키워드 추출 중...
- 이미지 프롬프트 생성 중...
- AI 이미지 생성 중...
**우선순위:** 높음

### 2. 페이지 인디케이터 크기 증가
**파일:** `lib/screens/diary_detail_screen.dart:776-810`
**현재 상태:** 너무 작은 점 (6x6)
**개선 내용:** 8x8 또는 10x10으로 증가, 현재 페이지는 12x12
**우선순위:** 높음

### 3. 디버그 로그 정리
**대상 파일들:**
- `lib/services/ai_service.dart` - 40+ print 문
- `lib/services/database_service.dart` - 20+ print 문
- `lib/screens/diary_list_screen.dart` - 15+ print 문
- `lib/screens/diary_detail_screen.dart` - 10+ print 문
- `lib/screens/diary_create_screen.dart` - 10+ print 문
**개선 내용:**
- 프로덕션 빌드에서 print 제거 (kDebugMode 사용)
- logger 패키지 도입 고려
**우선순위:** 중간

---

## 단기 개선 (1-2주)

### 4. 성능 최적화
**문제:** "Skipped 127 frames! The application may be doing too much work on its main thread"
**개선 내용:**
- 이미지 로딩 최적화
  - 썸네일 생성 및 캐싱
  - 이미지 리사이징 (현재 원본 그대로 로드)
  - `cacheExtent` 설정 추가
- 데이터베이스 쿼리 최적화
  - 인덱스 추가 (createdAt, emotion)
  - 페이지네이션 구현 (현재 전체 로드)
- AI 처리 백그라운드화
  - Isolate 사용 검토
**우선순위:** 높음

### 5. 일기 백업/복원 기능
**위치:** 설정 화면에 추가
**구현 내용:**
- JSON 형식으로 내보내기
  - 일기 데이터 (제목, 내용, 날짜)
  - 이미지 파일들 (base64 또는 별도 폴더)
- JSON 파일에서 가져오기
- 진행률 표시
**우선순위:** 중간

### 6. 오류 처리 개선
**현재 문제:**
- 네트워크 오류 시 앱이 멈춤
- AI 생성 실패 시 재시도 없음
- 이미지 로드 실패 시 처리 미흡
**개선 내용:**
- 네트워크 오류 재시도 로직 (3회)
- 타임아웃 설정 추가
- 사용자 친화적인 에러 메시지
- 오프라인 감지 및 안내
**우선순위:** 높음

### 7. 캐시 삭제 기능
**위치:** `lib/screens/settings_screen.dart`
**구현 내용:**
- 이미지 캐시 크기 계산 및 표시
  - `/app_flutter/diary_images/` (AI 생성 이미지)
  - `/app_flutter/user_photos/` (사용자 업로드)
  - CachedNetworkImage 캐시
- 선택적 삭제 옵션
  - 임시 파일만
  - 캐시된 이미지
  - 전체 초기화
**우선순위:** 중간

---

## 중기 개선 (1개월)

### 8. 이미지 최적화
**문제:** 이미지 파일 크기가 큼 (AI 생성 이미지 1-2MB)
**개선 내용:**
- 이미지 압축 (flutter_image_compress)
- 리사이징 (최대 1080x1080)
- WebP 형식 사용 고려
- 썸네일 자동 생성
**우선순위:** 중간

### 9. 보안 개선
**현재 문제:** API 키가 하드코딩 (`lib/services/ai_service.dart:15`)
**개선 내용:**
- 환경 변수로 이동 (flutter_dotenv)
- .env 파일 생성 및 .gitignore 추가
- 프로덕션: 백엔드 API 프록시 사용
**우선순위:** 높음 (배포 전 필수)

### 10. 오프라인 모드 지원
**구현 내용:**
- 네트워크 연결 상태 감지
- 오프라인 시 일기 작성은 가능 (이미지 없이)
- 온라인 복귀 시 자동 동기화
- 대기 중인 작업 표시
**우선순위:** 중간

### 11. 클라우드 동기화 (Firebase Storage)
**구현 내용:**
- 일기 데이터 자동 백업
- 여러 기기 간 동기화
- 충돌 해결 로직
**우선순위:** 낮음 (프리미엄 기능)

---

## 장기 개선 (2-3개월)

### 12. 실제 결제 시스템 연동
**현재 상태:** 프리미엄 기능이 있지만 결제 없음
**구현 내용:**
- Google Play Billing (Android)
- App Store In-App Purchase (iOS)
- 구독 상태 확인 및 복원
- 무료 평가판 (7일)
**우선순위:** 높음 (수익화 필수)

### 13. 앱 온보딩
**구현 내용:**
- 첫 실행 시 튜토리얼
- 주요 기능 설명 (이미지 생성, 갤러리, 통계)
- 샘플 일기 제공
- Skip 버튼
**우선순위:** 중간

### 14. 다크 모드
**구현 내용:**
- 다크 테마 정의
- 테마 전환 기능
- 시스템 설정 따라가기
- 이미지 뷰어 다크 모드 최적화
**우선순위:** 낮음

### 15. 성취 시스템
**구현 내용:**
- 연속 작성 일수 표시
- 배지 시스템
  - "7일 연속 작성"
  - "첫 AI 그림일기"
  - "50개 일기 작성"
- 성취 알림
**우선순위:** 낮음

### 16. 연간 리포트
**구현 내용:**
- 올해의 감정 통계
- 가장 많이 쓴 키워드
- 월별 작성 일수
- 올해의 베스트 일기 (좋아요 기능 필요)
- PDF 또는 이미지로 공유
**우선순위:** 낮음

---

## 기타 개선사항

### 17. 일기 작성 화면 개선
- 자동 저장 (draft)
- 글자수 카운터
- 작성 시간 표시
- 작성 중 경고 (뒤로가기 시)

### 18. 일기 상세 화면 개선
- 작성/수정 날짜 모두 표시
- 좋아요 또는 별점 기능
- 메모 추가 기능

### 19. 일기 목록 화면 개선
- 날짜 헤더 스티키
- 감정별 필터
- 정렬 옵션 (최신순, 오래된순, 감정별)

### 20. 설정 화면 개선
- 앱 버전 정보
- 이용약관 및 개인정보처리방침
- 문의하기 (이메일 또는 폼)
- 오픈소스 라이선스

---

## 완료된 기능 (참고)

- ✅ AI 이미지 생성
- ✅ 사진 업로드 (프리미엄)
- ✅ 프리미엄 글꼴 (10종)
- ✅ 6가지 이미지 스타일
- ✅ 고급 이미지 옵션
- ✅ 검색 기능
- ✅ 공유 기능 (텍스트/이미지)
- ✅ 감정 통계 (주간/월간/전체)
- ✅ 캘린더 뷰
- ✅ 4개 언어 지원 (한/일/영/중)
- ✅ 일기 수정 (1회 이미지 재생성)
- ✅ 사진 분위기 분석 및 프롬프트 반영

---

## 우선순위 요약

**긴급 (배포 전 필수):**
1. 보안 개선 (API 키)
2. 실제 결제 시스템 연동

**높은 우선순위:**
1. 프로그레스 단계 표시
2. 페이지 인디케이터 크기
3. 성능 최적화
4. 오류 처리 개선

**중간 우선순위:**
1. 디버그 로그 정리
2. 일기 백업/복원
3. 캐시 삭제 기능
4. 이미지 최적화
5. 오프라인 모드

**낮은 우선순위:**
1. 앱 온보딩
2. 다크 모드
3. 성취 시스템
4. 연간 리포트
